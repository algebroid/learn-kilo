## Rawモードに入る

キー入力をユーザーから受け取り、何もしないプログラムを作る。

```c
#include <unistd.h>
int main() {
  char c;
  while (read(STDIN_FILENO, &c, 1) == 1);
  return 0;
}
```

`read()`と`STDIN_FILENO`は`<unistd.h>`から来ている。`read`は標準入力から1バイト読み込み、変数`c`に値を書き込む。

ここで、ターミナルでエディタを作るのに必要な知識を確認する。それはターミナルの**カノニカルモード**である。カノニカルモード、あるいは**cookedモード**では、キーボードから入力した文字は、Enterを押さないとプログラムに送ることはできない。これは簡単なプログラムを作る上では重宝する。しかし、エディタのようにキーボードからの入力をすぐに反映したい場合は不便である。

そこで必要なのが**rawモード**である。しかし残念ながら、ターミナルをrawモードに設定する簡単な方法はない。ターミナルの中のいろんなフラグをバキバキに折る必要があり、手間がかかるのだ。本章ではこれについて説明する。

上のプログラムは無限ループである。`read()`に`Ctrl+D`でシグナルを送ると、ループ判定を抜けて終了する。`Ctrl+C`を入力すると、判定に関係なく即座に終了する。
